# CommonJS

JavaScript早期并没有制定一个更广泛的应用程序的标准库。

CommonJS的提出，主要是为了弥补当前JavaScript没有标准库的缺陷。
它的终极目标是：提供一个类似Python，Java等语言的标准库，而不是让JavaScript停留在小脚本的阶段

CommonJS就是模块化的标准，nodejs就是CommonJS的实现

在node中，模块分为两大类：
- 一类是node提供的模块，称为核心模块
- 另一类是用户编写的模块，称为文件模块

核心模块在node源码的编译过程中，编译进了二进制执行文件。
在node启动时，部分核心模块就被直接加载进内存，所以这部分核心模块载入时，文件定位和编译执行等步骤可以省略掉，并且在路径分析中优先判断，所以他们的加载速度是最快的。

文件模块则是在运行时动态加载，需要完整的路径分析、文件定位、编译执行等过程。
速度相比核心模块慢一些，但是用的非常多。

## CommonJS关于自定义模块的规定

我们可以把公共的功能单独抽离成一个js文件作为一个模块，默认情况下这个模块里面的方法或者属性，外面是没办法访问的。
如果要让外部访问模块里面的方法和属性，就需要在模块里面通过exports或者module.exports暴露属性或者方法

在需要使用这些模块的文件中，用require的方式引入模块。就可以使用在模块中暴露的属性或方法。

```js
export.xxx = xxx;

外部：
const m = require("...");
使用：m.xxx
```

如果所有的东西都封装在一个对象里，可以使用module.exports
```js
module.exports=xxx;

-------
const xxx = require('...'); // 注：这里引入之后就是xxx
```

## 包目录规范

- package.json：包描述文件
- bin：存放可执行二进制文件的目录
- lib：存放JavaScript代码的目录
- doc：用于存放文档的目录